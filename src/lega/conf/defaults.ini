# [DEFAULT]
# log_conf = /path/to/logger.yml

[frontend]
host = 127.0.0.1
port = 9000

[worker]
# GPG
gpg_cmd = gpg --homedir ~/.gnupg --decrypt %(file)s

# RSA master key
active_key = 1

inbox = /mnt/ega/inbox/%(user_id)s
staging = /mnt/ega/staging
outbox = /mnt/ega/outbox/%(user_id)s

[vault]
location = /mnt/ega/vault

## Connecting to Local Broker
[local.broker]
enable_ssl = no
host = localhost
port = 5672
username = guest
password = guest
vhost = /
connection_attempts = 2
heartbeat = 0

exchange = lega

tasks_queue     = tasks
completed_queue = completed
archived_queue  = archived
verified_queue  = verified
users_queue     = users
account_queue   = account

routing_complete = lega.complete
routing_archived = lega.archived
routing_verified = lega.verified
routing_account = lega.created

## Connecting to Central EGA
[cega.broker]
host = localhost
port = 5672
username = guest
password = guest
vhost = /
connection_attempts = 2
# heartbeat = 0

exchange = localega.v1

enable_ssl = no
# cacert = /path/to/cacert.pem
# cert = /path/to/cert.pem
# keyfile = /path/to/key.pem

[db]
# By TCP/IP
#uri = postgresql+psycopg2://postgres:mysecretpassword@localhost:5432
# By Unix sockets
# uri = postgresql+psycopg2://admin:secret@/lega
username = admin
password = secret
dbname = lega
host = localhost
port = 5432

[monitor]
# in seconds
interval = 60 

[inbox]
user_home = /home/%(user_id)s
create_account = useradd -u {user_id} --comment "{comment}" {user_id}; chown root:ega_users {home}
update_password = echo "{user_id}:{password_hash}" | chpasswd -e

# [master.key.1]
# key = /path/to/rsa/key.pem
# pub_key = /path/to/rsa/public-key.pem
# passphrase = something

# [master.key.2]
# key = /another/path/to/rsa/key.pem
# pub_key = /another/path/to/rsa/public-key.pem
# passphrase = something-else
